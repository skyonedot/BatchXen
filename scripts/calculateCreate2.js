const ethers = require('ethers')
require('dotenv').config()

async function main(){
    let wallet = new ethers.Wallet(process.env.PK)
    // From 是 Factory的地址
    const from = "0x13b0d85ccb8bf860b6b79af3029fca081ae9bef2";
    const salt = "0x06b3dfaec148fb1bb2b066f10ec285e7c9bf402ab32aa78a5d38e34566810cd2";
    // 这个bytecode是 BugBatchXen1的 在 artifacts/contracts/BugBatchXen1.sol里面能找到
    const initCode = "0x60c06040523480156200001157600080fd5b50733d602d80600a3d3981f3363d3d373d3d3d363d7360601b3060601b6e5af43d82803e903d91602b57fd5bf360881b604051602001620000559392919062000185565b6040516020818303038152906040526000908162000074919062000442565b503073ffffffffffffffffffffffffffffffffffffffff1660808173ffffffffffffffffffffffffffffffffffffffff16815250503373ffffffffffffffffffffffffffffffffffffffff1660a08173ffffffffffffffffffffffffffffffffffffffff168152505062000529565b60007fffffffffffffffffffffffffffffffffffffffff00000000000000000000000082169050919050565b6000819050919050565b6200012e6200012882620000e3565b6200010f565b82525050565b60007fffffffffffffffffffffffffffffff000000000000000000000000000000000082169050919050565b6000819050919050565b6200017f620001798262000134565b62000160565b82525050565b600062000193828662000119565b601482019150620001a5828562000119565b601482019150620001b782846200016a565b600f82019150819050949350505050565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806200024a57607f821691505b60208210810362000260576200025f62000202565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302620002ca7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff826200028b565b620002d686836200028b565b95508019841693508086168417925050509392505050565b6000819050919050565b6000819050919050565b6000620003236200031d6200031784620002ee565b620002f8565b620002ee565b9050919050565b6000819050919050565b6200033f8362000302565b620003576200034e826200032a565b84845462000298565b825550505050565b600090565b6200036e6200035f565b6200037b81848462000334565b505050565b5b81811015620003a3576200039760008262000364565b60018101905062000381565b5050565b601f821115620003f257620003bc8162000266565b620003c7846200027b565b81016020851015620003d7578190505b620003ef620003e6856200027b565b83018262000380565b50505b505050565b600082821c905092915050565b60006200041760001984600802620003f7565b1980831691505092915050565b600062000432838362000404565b9150826002028217905092915050565b6200044d82620001c8565b67ffffffffffffffff811115620004695762000468620001d3565b5b62000475825462000231565b62000482828285620003a7565b600060209050601f831160018114620004ba5760008415620004a5578287015190505b620004b1858262000424565b86555062000521565b601f198416620004ca8662000266565b60005b82811015620004f457848901518255600182019150602085019450602081019050620004cd565b8683101562000514578489015162000510601f89168262000404565b8355505b6001600288020188555050505b505050505050565b60805160a051610d6a6200054f600039600061067f015260006102060152610d6a6000f3fe608060405234801561001057600080fd5b506004361061007d5760003560e01c8063dcc9f2821161005b578063dcc9f282146100d6578063e02e2cf614610106578063ff49596e14610122578063ff6d8198146101525761007d565b806369aafa9c146100825780639ff054df1461009e578063bb739814146100ba575b600080fd5b61009c600480360381019061009791906107de565b610182565b005b6100b860048036038101906100b39190610841565b610273565b005b6100d460048036038101906100cf919061086e565b6102f5565b005b6100f060048036038101906100eb91906108ae565b6104f0565b6040516100fd91906108fd565b60405180910390f35b610120600480360381019061011b9190610841565b61057c565b005b61013c600480360381019061013791906107de565b61074b565b6040516101499190610927565b60405180910390f35b61016c600480360381019061016791906107de565b610763565b6040516101799190610927565b60405180910390f35b7306450dee7fd2fb8e39061434babcfc05599a6fb873ffffffffffffffffffffffffffffffffffffffff16631c5603058260646040518363ffffffff1660e01b81526004016101d2929190610987565b600060405180830381600087803b1580156101ec57600080fd5b505af1158015610200573d6000803e3d6000fd5b505050507f000000000000000000000000000000000000000000000000000000000000000073ffffffffffffffffffffffffffffffffffffffff163073ffffffffffffffffffffffffffffffffffffffff1614610270573273ffffffffffffffffffffffffffffffffffffffff16ff5b50565b7306450dee7fd2fb8e39061434babcfc05599a6fb873ffffffffffffffffffffffffffffffffffffffff16639ff054df826040518263ffffffff1660e01b81526004016102c09190610927565b600060405180830381600087803b1580156102da57600080fd5b505af11580156102ee573d6000803e3d6000fd5b5050505050565b6000808054610303906109df565b80601f016020809104026020016040519081016040528092919081815260200182805461032f906109df565b801561037c5780601f106103515761010080835404028352916020019161037c565b820191906000526020600020905b81548152906001019060200180831161035f57829003601f168201915b50505050509050600080600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905060008190505b85826103da9190610a3f565b81101561049957600033826040516020016103f6929190610adc565b604051602081830303815290604052805190602001209050808551602087016000f593508373ffffffffffffffffffffffffffffffffffffffff16639ff054df876040518263ffffffff1660e01b81526004016104539190610927565b600060405180830381600087803b15801561046d57600080fd5b505af1158015610481573d6000803e3d6000fd5b5050505050808061049190610b08565b9150506103ce565b5084816104a69190610a3f565b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505050505050565b6000808383604051602001610506929190610adc565b604051602081830303815290604052805190602001209050308160006040516020016105329190610bf3565b6040516020818303038152906040528051906020012060405160200161055a93929190610c8c565b6040516020818303038152906040528051906020012060001c91505092915050565b6000600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490506000600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490508083836106119190610a3f565b1061061c5780610629565b82826106289190610a3f565b5b905060008290505b8181101561070157600061064533836104f0565b90508073ffffffffffffffffffffffffffffffffffffffff166369aafa9c6005600a856106729190610d03565b1461067d573361069f565b7f00000000000000000000000000000000000000000000000000000000000000005b6040518263ffffffff1660e01b81526004016106bb91906108fd565b600060405180830381600087803b1580156106d557600080fd5b505af11580156106e9573d6000803e3d6000fd5b505050505080806106f990610b08565b915050610631565b5080600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550505050565b60016020528060005260406000206000915090505481565b60026020528060005260406000206000915090505481565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006107ab82610780565b9050919050565b6107bb816107a0565b81146107c657600080fd5b50565b6000813590506107d8816107b2565b92915050565b6000602082840312156107f4576107f361077b565b5b6000610802848285016107c9565b91505092915050565b6000819050919050565b61081e8161080b565b811461082957600080fd5b50565b60008135905061083b81610815565b92915050565b6000602082840312156108575761085661077b565b5b60006108658482850161082c565b91505092915050565b600080604083850312156108855761088461077b565b5b60006108938582860161082c565b92505060206108a48582860161082c565b9150509250929050565b600080604083850312156108c5576108c461077b565b5b60006108d3858286016107c9565b92505060206108e48582860161082c565b9150509250929050565b6108f7816107a0565b82525050565b600060208201905061091260008301846108ee565b92915050565b6109218161080b565b82525050565b600060208201905061093c6000830184610918565b92915050565b6000819050919050565b6000819050919050565b600061097161096c61096784610942565b61094c565b61080b565b9050919050565b61098181610956565b82525050565b600060408201905061099c60008301856108ee565b6109a96020830184610978565b9392505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b600060028204905060018216806109f757607f821691505b602082108103610a0a57610a096109b0565b5b50919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000610a4a8261080b565b9150610a558361080b565b9250828201905080821115610a6d57610a6c610a10565b5b92915050565b60008160601b9050919050565b6000610a8b82610a73565b9050919050565b6000610a9d82610a80565b9050919050565b610ab5610ab0826107a0565b610a92565b82525050565b6000819050919050565b610ad6610ad18261080b565b610abb565b82525050565b6000610ae88285610aa4565b601482019150610af88284610ac5565b6020820191508190509392505050565b6000610b138261080b565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203610b4557610b44610a10565b5b600182019050919050565b600081905092915050565b60008190508160005260206000209050919050565b60008154610b7d816109df565b610b878186610b50565b94506001821660008114610ba25760018114610bb757610bea565b60ff1983168652811515820286019350610bea565b610bc085610b5b565b60005b83811015610be257815481890152600182019150602081019050610bc3565b838801955050505b50505092915050565b6000610bff8284610b70565b915081905092915050565b600081905092915050565b7fff00000000000000000000000000000000000000000000000000000000000000600082015250565b6000610c4b600183610c0a565b9150610c5682610c15565b600182019050919050565b6000819050919050565b6000819050919050565b610c86610c8182610c61565b610c6b565b82525050565b6000610c9782610c3e565b9150610ca38286610aa4565b601482019150610cb38285610c75565b602082019150610cc38284610c75565b602082019150819050949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b6000610d0e8261080b565b9150610d198361080b565b925082610d2957610d28610cd4565b5b82820690509291505056fea26469706673582212201e9232a7faad5cecd408bda98cda2bea7f6fa0c0879a675d26b1bec8ea39335b64736f6c63430008110033";
    const initCodeHash = ethers.utils.keccak256(initCode);
    console.log(typeof(initCodeHash))
    // console.log("initCodeHash", initCodeHash);

    let contractAddr = ethers.utils.getCreate2Address(from, salt, initCodeHash);
    console.log(contractAddr)
}


main()